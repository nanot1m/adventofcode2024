let t,e;function n(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var r={};n(r,"id",()=>tn),n(r,"minBy",()=>tr),n(r,"maxBy",()=>to),n(r,"min",()=>ti),n(r,"max",()=>ts),n(r,"zip",()=>ta),n(r,"readLines",()=>tu),n(r,"readBlocks",()=>tl),n(r,"readIntLines",()=>tf),n(r,"readIntArr",()=>th),n(r,"mod",()=>tc),n(r,"functor",()=>function t(e){return{map:n=>t(n(e)),get:()=>e}}),n(r,"cycle",()=>tp),n(r,"at",()=>tm),n(r,"add",()=>td),n(r,"mul",()=>tg),n(r,"mulMatrix",()=>ty),n(r,"getOrUpdate",()=>tv),n(r,"mulMatrices",()=>tx),n(r,"compareAsc",()=>tb),n(r,"compareDesc",()=>tI),n(r,"update",()=>tM),n(r,"inc",()=>tw),n(r,"splitAt",()=>tE),n(r,"rotate2d",()=>tS),n(r,"rotateStrings2d",()=>tX),n(r,"rotateString2d",()=>tY),n(r,"tuple",()=>tL),n(r,"rotate",()=>tR),n(r,"solveSquareEquation",()=>tB),n(r,"gcd",()=>tA),n(r,"lcm",()=>t$),n(r,"combinations",()=>function t(e,n,r=[],o=[],i=0){if(0===n){r.push([...o]);return}for(let s=i;s<e.length;s++)o.push(e[s]),t(e,n-1,r,o,s+1),o.pop();return r}),n(r,"repeatWithDelimiters",()=>tk),n(r,"toString",()=>tD),n(r,"isInRange",()=>tP),n(r,"identity",()=>tq);var o={};n(o,"enableCachedVec",()=>s),n(o,"vec",()=>a),n(o,"DIR_TO_VEC",()=>u),n(o,"DIRS_4",()=>l),n(o,"DIRS_8",()=>f),n(o,"DIRS_4_DIAG",()=>h),n(o,"around",()=>c),n(o,"add",()=>d),n(o,"asDir",()=>p),n(o,"signed",()=>m),n(o,"sub",()=>g),n(o,"scale",()=>y),n(o,"cross",()=>v),n(o,"dot",()=>x),n(o,"fromDir",()=>b),n(o,"zero",()=>I),n(o,"x",()=>M),n(o,"y",()=>w),n(o,"isVec",()=>E),n(o,"eq",()=>S),n(o,"min",()=>X),n(o,"max",()=>Y),n(o,"neg",()=>L),n(o,"segment",()=>R),n(o,"cLen",()=>$),n(o,"ZERO",()=>B),n(o,"len",()=>A),n(o,"mLen",()=>k),n(o,"inRange",()=>D),n(o,"toString",()=>P);const i=new Map;function s(){a=(t,e)=>r.getOrUpdate(i,`${t},${e}`,()=>[t,e])}let a=(t,e)=>[t,e];const u={U:a(0,-1),D:a(0,1),L:a(-1,0),R:a(1,0)},l=[u.U,u.R,u.D,u.L],f=[a(-1,-1),a(0,-1),a(1,-1),a(-1,0),a(1,0),a(-1,1),a(0,1),a(1,1)],h=[a(-1,-1),a(1,-1),a(-1,1),a(1,1)],c=(t,e=f)=>e.map(e=>d(t,e)),p=t=>{if(t in u)return t;throw Error(`Invalid direction: ${t}`)},m=([t,e])=>a(Math.sign(t),Math.sign(e)),d=([t,e],[n,r])=>a(t+n,e+r),g=([t,e],[n,r])=>a(t-n,e-r),y=([t,e],n)=>a(t*n,e*n),v=([t,e],[n,r])=>t*r-e*n,x=([t,e],[n,r])=>t*n+e*r,b=t=>u[t],I=()=>a(0,0),M=t=>t[0],w=t=>t[1],E=t=>Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1],S=(t,e)=>t[0]===e[0]&&t[1]===e[1],X=(t,e)=>a(Math.min(t[0],e[0]),Math.min(t[1],e[1])),Y=(t,e)=>a(Math.max(t[0],e[0]),Math.max(t[1],e[1])),L=t=>a(-t[0],-t[1]);function*R(t,e){let n=m(g(e,t)),r=$(t,e),o=t;yield o;for(let t=0;t<r;t++)o=d(o,n),yield o}const B=I(),A=t=>Math.sqrt(t[0]**2+t[1]**2),$=(t,e=I())=>Math.max(Math.abs(t[0]-e[0]),Math.abs(t[1]-e[1])),k=(t,e=I())=>Math.abs(t[0]-e[0])+Math.abs(t[1]-e[1]),D=(t,e,n)=>t[0]>=e[0]&&t[0]<=n[0]&&t[1]>=e[1]&&t[1]<=n[1],P=([t,e])=>`${t},${e}`;var q={};n(q,"vec3",()=>N),n(q,"x",()=>O),n(q,"y",()=>T),n(q,"z",()=>z),n(q,"zero3",()=>j),n(q,"add",()=>C),n(q,"sub",()=>F),n(q,"rot",()=>_),n(q,"min",()=>U),n(q,"max",()=>W),n(q,"mLen",()=>H),n(q,"line",()=>V),n(q,"dot",()=>G),n(q,"normalized",()=>Z),n(q,"cross",()=>J),n(q,"isZero",()=>K),n(q,"scale",()=>Q),n(q,"magnitudeSquared",()=>tt);const N=(t,e,n)=>[t,e,n],O=t=>t[0],T=t=>t[1],z=t=>t[2],j=()=>[0,0,0],C=(t,e)=>[t[0]+e[0],t[1]+e[1],t[2]+e[2]],F=(t,e)=>[t[0]-e[0],t[1]-e[1],t[2]-e[2]],_=(t,e)=>{let[n,r,o]=t,[i,s,a]=e;return[n*i[0]+r*i[1]+o*i[2],n*s[0]+r*s[1]+o*s[2],n*a[0]+r*a[1]+o*a[2]]},U=(t,e)=>[Math.min(t[0],e[0]),Math.min(t[1],e[1]),Math.min(t[2],e[2])],W=(t,e)=>[Math.max(t[0],e[0]),Math.max(t[1],e[1]),Math.max(t[2],e[2])],H=(t,e=j())=>Math.abs(t[0]-e[0])+Math.abs(t[1]-e[1])+Math.abs(t[2]-e[2]);function*V(t,e){let n=N(Math.sign(e[0]-t[0]),Math.sign(e[1]-t[1]),Math.sign(e[2]-t[2])),r=t;for(;H(r,e)>0;)yield r,r=C(r,n);yield e}const G=(t,e)=>t[0]*e[0]+t[1]*e[1]+t[2]*e[2],Z=t=>{let e=Math.sqrt(G(t,t));return[t[0]/e,t[1]/e,t[2]/e]},J=(t,e)=>[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]],K=t=>0===t[0]&&0===t[1]&&0===t[2],Q=(t,e)=>[t[0]*e,t[1]*e,t[2]*e],tt=t=>G(t,t),te=Iterator.from;function tn(t){return t}function tr(t,e){return t.reduce((t,n)=>e(t)<e(n)?t:n)}function to(t,e){return t.reduce((t,n)=>e(t)>e(n)?t:n)}function ti(t){return tr(t,tn)}function ts(t){return to(t,tn)}function ta(t,...e){let n=tr(e,t=>t.length).length;return t.slice(0,n).map((t,n)=>e.reduce((t,e)=>(t.push(e[n]),t),[t]))}function tu(t){return t.split("\n")}function tl(t){return t.split("\n\n")}function tf(t){return tu(t).map(Number)}function th(t,e=","){return t.split(e).map(Number)}const tc=(t,e)=>(t%e+e)%e;function tp(t,e){return t.slice(e).concat(t.slice(0,e))}function tm(t,e){return e<0&&(e=t.length+e),t[e]}function td(t,e){return t+e}function tg(t,e){return t*e}function ty(t,e){let n=[];for(let r=0;r<t.length;r++){n[r]=[];for(let o=0;o<e[0].length;o++){let i=0;for(let n=0;n<t[0].length;n++)i+=t[r][n]*e[n][o];n[r][o]=i}}return n}function tv(t,e,n){return t instanceof Map?(t.has(e)||t.set(e,n()),t.get(e)):(e in t||(t[e]=n()),t[e])}function tx(t,...e){return e.reduce(ty,t)}function tb(t,e){return t-e}function tI(t,e){return e-t}function tM(t,e,n){return t.slice(0,e).concat(n(t[e])).concat(t.slice(e+1))}function tw(t){return t+1}function tE(t,e){return[t.slice(0,e),t.slice(e)]}function tS(t,e=!0){let n=t.length,r=te(t).map(t=>t.length).max(),o=Array.from({length:r},()=>Array.from({length:n}));for(let i=0;i<n;i++)for(let s=0;s<r;s++){let a=t[i]?.[s],[u,l]=e?[s,n-i-1]:[r-s-1,i];o[u][l]=a}return o}function tX(t,e=!0){return tS(t.map(t=>t.split("")),e).map(t=>t.map(t=>t??" ").join("").trimEnd())}function tY(t,e=!0){return tX(t.split("\n"),e).join("\n")}function tL(...t){return t}const tR=(t,e=!0)=>"string"==typeof t?tY(t,e):"string"==typeof t[0]?tX(t,e):tS(t,e);function tB(t,e,n){let r=e*e-4*t*n;if(r<0)return[];if(0===r)return[-e/(2*t)];{let n=Math.sqrt(r);return[(-e+n)/(2*t),(-e-n)/(2*t)]}}function tA(t,e){return e?tA(e,t%e):t}function t$(t,e){return t*e/tA(t,e)}function tk(t,e,n){let r="string"==typeof t?"":[];for(let o=0;o<n;o++)o>0&&(r=r.concat(e)),r=r.concat(t);return r}function tD(t){return t.toString()}function tP(t,e,n){return t>=e&&t<=n}const tq=t=>t;Iterator.prototype.first=function(){for(let t of this)return t},Iterator.prototype.firstOrDefault=function(t){for(let t of this)return t;return t},Iterator.prototype.last=function(){let t;for(let e of this)t=e;return t},Iterator.prototype.skip=function*(t){let e=0;for(let n of this)e>=t&&(yield n),e++},Iterator.prototype.groupsOf=function*(t){let e=[];for(let n of this)e.push(n),e.length===t&&(yield e,e=[]);e.length>0&&(yield e)},Iterator.prototype.groupBy=function(t){let e=new Map;for(let n of this){let r=t(n);e.has(r)||e.set(r,[]),e.get(r).push(n)}return e},Iterator.prototype.sum=function(){return this.reduce(td,0)},Iterator.prototype.multiply=function(){return this.reduce(tg,1)},Iterator.prototype.count=function(t=t=>!0){let e=0;for(let n of this)t(n)&&(e+=1);return e},Iterator.prototype.zip=function*(t){let e=this[Symbol.iterator](),n=t[Symbol.iterator]();for(;;){let{value:t,done:r}=e.next(),{value:o,done:i}=n.next();if(r||i)return;yield[t,o]}},Iterator.prototype.indexed=function(){return range(1/0).zip(this)},Iterator.prototype.windowed=function*(t){let e=[];for(let n of this)e.push(n),e.length===t&&(yield e.slice(),e.shift())},Iterator.prototype.findIndex=function(t){let e=0;for(let n of this){if(t(n))return e;e++}return -1},Iterator.prototype.indexOf=function(t){return this.findIndex(e=>e===t)},Iterator.prototype.skipLast=function*(t=1){if(t<=0){yield*this;return}let e=Array(t),n=0;for(let r of this)n>=t&&(yield e[n%t]),e[n%t]=r,n++},Iterator.prototype.takeEvery=function*(t,e=0){if(!(t<=0))for(let n of(e<0&&(e=0),this))0===e&&(yield n,e=t),e--},Iterator.prototype.takeWhile=function*(t){for(let e of this){if(!t(e))return;yield e}},Iterator.prototype.takeUntil=function*(t){for(let e of this){if(t(e))return;yield e}},Iterator.prototype.distinct=function*(t=t=>t){let e=new Set;for(let n of this){let r=t(n);e.has(r)||(e.add(r),yield n)}},Iterator.prototype.min=function(){let t;for(let e of this)(void 0===t||e<t)&&(t=e);return t},Iterator.prototype.max=function(){let t;for(let e of this)(void 0===t||e>t)&&(t=e);return t},Iterator.prototype.maxBy=function(t){let e,n;for(let r of this){let o=t(r);(void 0===e||o>n)&&(e=r,n=o)}return e},Iterator.prototype.countFrequencies=function(){return this.toMap(t=>t,(t,e)=>(e.get(t)??0)+1)},Iterator.prototype.combinations=function(t){return function* t(e,n,r=[],o=0){if(0===n){yield[...r];return}for(let i=o;i<e.length;i++)r.push(e[i]),yield*t(e,n-1,r,i+1),r.pop()}(this.toArray(),t)},Iterator.prototype.toMap=function(t,e){let n=new Map;for(let r of this)n.set(t(r,n),e(r,n));return n},Iterator.prototype.toSet=function(){return new Set(this)},Iterator.prototype.lcm=function(){return this.reduce(t$,1)},Iterator.prototype.tap=function*(t){for(let e of this)t(e),yield e},Iterator.prototype.chain=function(t){return t(this)};class tN{static fromArray(t){let e=new tN;return t.forEach((t,n)=>{t.forEach((t,r)=>{e.set(a(r,n),t)})}),e}#t=(t,e)=>l.map(e=>d(t,e)).filter(t=>this.has(t));#e=new Map;#n=1/0;#r=1/0;#o=-1/0;#i=-1/0;#s=!1;get bounds(){return this.#s&&this.#a(),{minX:this.#n,minY:this.#r,maxX:this.#o,maxY:this.#i,botRight:a(this.#o,this.#i),topLeft:a(this.#n,this.#r)}}get height(){return this.#i-this.#r+1}get width(){return this.#o-this.#n+1}constructor(t=[]){for(let[e,n]of t)this.set(e,n)}#a(){this.#e.forEach((t,e)=>{t.forEach((t,n)=>{this.#u(n,e)})}),this.#s=!1}#u(t,e){this.#n=Math.min(this.#n,t),this.#r=Math.min(this.#r,e),this.#o=Math.max(this.#o,t),this.#i=Math.max(this.#i,e)}get([t,e]){return this.#e.get(t)?.get(e)}set([t,e],n){return!1===this.#e.has(t)&&this.#e.set(t,new Map),this.#e.get(t).set(e,n),this.#u(t,e),this}has([t,e]){return this.#e.get(t)?.has(e)===!0}map(t){let e=new tN;for(let{pos:n,value:r}of this)e.set(n,t(r,n));return e}bfs(t,e){return function*(t,e,n,r){let o=[];if(E(n))o.push({distance:0,pos:n,value:t.get(n),parent:null});else for(let e of n)o.push({distance:0,pos:e,value:t.get(e),parent:null});let i=new Set;for(;o.length;){let n=o.shift(),s=n.pos.join();if(!i.has(s))for(let a of(i.add(s),yield n,r(n.pos,t))){let r={distance:n.distance+1,pos:a,value:t.get(a),parent:n};e(n,r)&&o.push(r)}}}(this,t,e,this.#t)}setGetNeighbors(t){return this.#t=t,this}[Symbol.iterator](){return function*(t){for(let e of t.keys())for(let n of t.get(e).keys())yield{pos:a(e,n),value:t.get(e).get(n)}}(this.#e)}values(){return this[Symbol.iterator]()}to2dArray({topLeftPos:t=a(this.#n,this.#r),botRightPos:e=a(this.#o,this.#i),valToString:n}){let[r,o]=t,[i,s]=e,u=[];for(let t=o;t<=s;t++){let e=[];for(let o=r;o<=i;o++){let r=this.get([o,t]);e.push(n(r))}u.push(e)}return u}toString({topLeftPos:t=a(this.#n,this.#r),botRightPos:e=a(this.#o,this.#i),valToString:n=t=>(t??".").toString()}={}){return this.to2dArray({topLeftPos:t,botRightPos:e,valToString:n}).map(t=>t.join("")).join("\n")}around4(t){return l.map(e=>d(t,e)).filter(t=>this.has(t)).map(t=>({pos:t,value:this.get(t)}))}around8(t){return f.map(e=>d(t,e)).filter(t=>this.has(t)).map(t=>({pos:t,value:this.get(t)}))}*lines(){for(let t=this.bounds.minY;t<=this.bounds.maxY;t++){let e=[];for(let n=this.bounds.minX;n<=this.bounds.maxX;n++)e.push({pos:a(n,t),value:this.get([n,t])});yield tL(t,e)}}*columns(){for(let t=this.bounds.minX;t<=this.bounds.maxX;t++){let e=[];for(let n=this.bounds.minY;n<=this.bounds.maxY;n++)e.push({pos:a(t,n),value:this.get([t,n])});yield tL(t,e)}}clone(){let t=new tN;for(let{pos:e,value:n}of this)t.set(e,n);return t}*borders(){for(let t=this.bounds.minX;t<=this.bounds.maxX;t++){let e=a(t,this.bounds.minY);yield{pos:e,value:this.get(e)},e=a(t,this.bounds.maxY),yield{pos:e,value:this.get(e)}}for(let t=this.bounds.minY;t<=this.bounds.maxY;t++){let e=a(this.bounds.minX,t);yield{pos:e,value:this.get(e)},e=a(this.bounds.maxX,t),yield{pos:e,value:this.get(e)}}}}function tO(t){for(let e of["\n\n","\n"," -> ",", ",","," - "," ","-"])if(t.includes(e))return e;return null}const tT={int:{name:"int",check:t=>"int"===t,parse:t=>parseInt(t,10)},str:{name:"str",check:t=>"str"===t,parse:t=>t},vec:{name:"vec",check:t=>"vec"===t,parse:t=>{let e=tO(t);if(!e)throw Error(`Invalid vec: ${t}`);let[n,r]=t.split(e).map(Number);return o.vec(n,r)}},vec3:{name:"vec3",check:t=>"vec3"===t,parse:t=>{let e=tO(t);if(!e)throw Error(`Invalid vec3: ${t}`);let[n,r,o]=t.split(e).map(Number);return q.vec3(n,r,o)}},arr:{name:"arr",check:t=>t.endsWith("[]"),parse:(t,e="")=>{let n=e.slice(0,-2),r=tz(n);if(!r)throw Error(`Invalid array type "${n}" in "${e}"`);let o=tO(t)??",";return t.split(o).filter(t=>""!==t).map(t=>r.parse(t.trim(),n))}},tuple:{name:"tuple",check:t=>t.startsWith("(")&&t.endsWith(")"),parse:(t,e="")=>{let n=e.slice(1,-1).split(","),r=tO(t)??",";return t.split(r).map((t,r)=>{let o=tz(n[r]);if(!o)throw Error(`Invalid tuple type "${n[r]}" in "${e}"`);return o.parse(t,n[r])})}}};function tz(t){for(let e in tT)if(tT[e].check(t))return tT[e];return null}function tj(t){return{...t,map:e=>tj({...t,parse:n=>e(t.parse(n))})}}const tC=(t=(function(t,...e){return tj({parse:function(n){let r={},o=0;for(let i=0;i<e.length;i++){let s=t[i].length+o,a=t[i+1]?n.indexOf(t[i+1],s):n.length,u=n.slice(s,a),[l,f]=e[i].split("|");r[l]=function(t,e){let n=tz(e);if(!n)throw Error(`Invalid type "${e}"`);return n.parse(t,e)}(u,f),o=a}return r}})})`p=${"pos|vec"} v=${"vel|vec"}`,tj({parse:e=>e.split((void 0)??tO(e)??",").map(t=>t.trim()).filter(t=>""!==t).map(e=>t.parse(e))})).parse;function tF(t,e,n,i,s){let a=o.add(t,o.scale(e,n));return o.vec(r.mod(a[0],i),r.mod(a[1],s))}const t_=`\
....#....
...###...
..#####..
.#######.
`;function tU(t,e,n,r=1){let o=(window.devicePixelRatio??1)*r;return t.canvas.width=e*r*o,t.canvas.height=n*r*o,t.canvas.style.width=`${e*r}px`,t.canvas.style.height=`${n*r}px`,t.scale(o,o),o}const tW=document.getElementById("canvas");if(!(tW instanceof HTMLCanvasElement))throw Error("no canvas");const tH=tW.getContext("2d");if(!tH)throw Error("no ctx");tU(tH,303,309);let tV=0,tG=()=>{};const tZ=document.getElementById("input-form");if(!(tZ instanceof HTMLFormElement))throw Error("no form");tZ.addEventListener("submit",function(t){t.preventDefault();let e=new FormData(this);!function(t,e){cancelAnimationFrame(tV),tG();let n=tC(t);tU(e,303,309),e.canvas.scrollIntoView({behavior:"smooth"});let r=t=>{for(let n of(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle="white",e.fillRect(0,0,303,309),t))e.fillStyle="#becfaa",e.beginPath(),e.arc(3*n.pos[0],3*n.pos[1],1.5,0,2*Math.PI),e.closePath(),e.fill()},i=document.getElementById("time"),s=document.getElementById("time-output");if(!(i instanceof HTMLInputElement))throw Error("no input");if(!(s instanceof HTMLSpanElement))throw Error("no output");let a=0,u=function(){let t=parseInt(this.value);if(isNaN(t))return;a=t,r(n.map(e=>({pos:tF(e.pos,e.vel,t,101,103),vel:e.vel})));let e=t.toString();s.textContent=e};i.disabled=!1,i.addEventListener("input",u),tG=()=>i.removeEventListener("input",u),tV=requestAnimationFrame(function t(){let e=n;for(let t=0;t<10;t++){a++,e=n.map(t=>({pos:tF(t.pos,t.vel,a,101,103),vel:t.vel}));let t=a.toString();if(s.textContent=t,i.value=t,function(t,e){let n=t.split("\n"),r=e.split("\n");return!!n.values().windowed(r.length).find(t=>t.every((t,e)=>t.includes(r[e])))}(function(t,e,n,r=1){let i=new tN;for(let e of t)i.set(e,(i.get(e)??0)+1);return i.toString({topLeftPos:o.vec(0,0),botRightPos:o.vec(100,102),valToString:t=>t?"#".repeat(r):".".repeat(r)})}(e.map(t=>t.pos),0,0,1),t_)){r(e);return}}r(e),tV=requestAnimationFrame(t)})}((e.get("input")?.toString()??"").trim(),tH)});
//# sourceMappingURL=index.6f358aa5.js.map
