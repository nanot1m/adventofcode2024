var e=globalThis,t={},r={},n=e.parcelRequire94c2;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var i={id:e,exports:{}};return t[e]=i,n.call(i.exports,i,i.exports),i.exports}var l=Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){r[e]=t},e.parcelRequire94c2=n),(0,n.register)("2GOZM",function(e,t){Object.defineProperty(e.exports,"t",{get:()=>s,set:void 0,enumerable:!0,configurable:!0});var r=n("iHpWs");function i(e){for(let t of["\n\n","\n"," -> ",", ",","," - "," ","-"])if(e.includes(t))return t;return null}let l={int:{name:"int",check:e=>"int"===e,parse:e=>parseInt(e,10)},str:{name:"str",check:e=>"str"===e,parse:e=>e},vec:{name:"vec",check:e=>"vec"===e,parse:e=>{let t=i(e);if(!t)throw Error(`Invalid vec: ${e}`);let[n,l]=e.split(t).map(Number);return(0,r.V).vec(n,l)}},vec3:{name:"vec3",check:e=>"vec3"===e,parse:e=>{let t=i(e);if(!t)throw Error(`Invalid vec3: ${e}`);let[n,l,a]=e.split(t).map(Number);return(0,r.V3).vec3(n,l,a)}},arr:{name:"arr",check:e=>e.endsWith("[]"),parse:(e,t="")=>{let r=t.slice(0,-2),n=a(r);if(!n)throw Error(`Invalid array type "${r}" in "${t}"`);let l=i(e)??",";return e.split(l).filter(e=>""!==e).map(e=>n.parse(e.trim(),r))}},tuple:{name:"tuple",check:e=>e.startsWith("(")&&e.endsWith(")"),parse:(e,t="")=>{let r=t.slice(1,-1).split(","),n=i(e)??",";return e.split(n).map((e,n)=>{let i=a(r[n]);if(!i)throw Error(`Invalid tuple type "${r[n]}" in "${t}"`);return i.parse(e,r[n])})}}};function a(e){for(let t in l)if(l[t].check(e))return l[t];return null}function o(e){return{...e,map:t=>o({...e,parse:r=>t(e.parse(r))})}}let s={int:()=>o(l.int),str:()=>o(l.str),vec:()=>o(l.vec),vec3:()=>o(l.vec3),arr:(e,t)=>o({parse:r=>r.split(t??i(r)??",").map(e=>e.trim()).filter(e=>""!==e).map(t=>e.parse(t))}),tuple:(e,t)=>o({parse:r=>r.split(t??i(r)??",").map((t,r)=>e[r].parse(t))}),enum:(...e)=>o({parse:t=>{if(!e.includes(t))throw Error(`Invalid enum value "${t}"`);return t}}),named:function(e,t){return{...t,name:e}},tpl:function(e,...t){return o({parse:function(r){let n={},i=0;for(let l=0;l<t.length;l++){let o=e[l].length+i,s=e[l+1]?r.indexOf(e[l+1],o):r.length,c=r.slice(o,s),[p,u]=t[l].split("|");n[p]=function(e,t){let r=a(t);if(!r)throw Error(`Invalid type "${t}"`);return r.parse(e,t)}(c,u),i=s}return n}})},tpl2:function(e,...t){return o({parse:function(r){let n={},i=0;for(let l=0;l<t.length;l++){let a=e[l].length+i,o=e[l+1]?r.indexOf(e[l+1],a):r.length,s=r.slice(a,o),c=t[l];n[c.name]=c.parse(s),i=o}return n}})}}}),n("jOplp");var i=n("iHpWs");n("2kwEI");var l=n("2GOZM");const a=(0,l.t).tpl`p=${"pos|vec"} v=${"vel|vec"}`,o=(0,l.t).arr(a).parse;function s(e,t,r){let n=(0,i.V).add(e,(0,i.V).scale(t,r));return(0,i.V).vec((0,i.Lib).mod(n[0],101),(0,i.Lib).mod(n[1],103))}const c="#".repeat(10);n("iHpWs");var p=n("7zFg5");const u=document.getElementById("canvas");if(!(u instanceof HTMLCanvasElement))throw Error("no canvas");const f=u.getContext("2d");if(!f)throw Error("no ctx");(0,p.scaleCanvasToPixelRatio)(f,303,309);let m=0,v=()=>{};const d=document.getElementById("input-form");if(!(d instanceof HTMLFormElement))throw Error("no form");d.addEventListener("submit",function(e){e.preventDefault();let t=new FormData(this);!function(e,t){cancelAnimationFrame(m),v();let r=o(e);(0,p.scaleCanvasToPixelRatio)(t,303,309),t.canvas.scrollIntoView({behavior:"smooth"});let n=e=>{for(let r of(t.clearRect(0,0,t.canvas.width,t.canvas.height),t.fillStyle="white",t.fillRect(0,0,303,309),e))t.fillStyle="#becfaa",t.beginPath(),t.arc(3*r.pos[0],3*r.pos[1],1.5,0,2*Math.PI),t.closePath(),t.fill()},l=document.getElementById("time"),a=document.getElementById("time-output");if(!(l instanceof HTMLInputElement))throw Error("no input");if(!(a instanceof HTMLSpanElement))throw Error("no output");let u=0,f=function(){let e=parseInt(this.value);if(isNaN(e))return;u=e,n(r.map(t=>({pos:s(t.pos,t.vel,e),vel:t.vel})));let t=e.toString();a.textContent=t};l.disabled=!1,l.addEventListener("input",f),v=()=>l.removeEventListener("input",f),m=requestAnimationFrame(function e(){let t=r;for(let e=0;e<10;e++){u++,t=r.map(e=>({pos:s(e.pos,e.vel,u),vel:e.vel}));let e=u.toString();if(a.textContent=e,l.value=e,(function(e){let t=Array.from({length:103},()=>Array(101).fill("."));for(let r of e)(0,i.Array2d).set(t,r,"#");return t.map(e=>e.join("")).join("\n")})(t.map(e=>e.pos)).includes(c)){n(t);return}}n(t),m=requestAnimationFrame(e)})}((t.get("input")?.toString()??"").trim(),f)});
//# sourceMappingURL=index.b4bd6526.js.map
