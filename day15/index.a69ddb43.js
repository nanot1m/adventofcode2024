var e=globalThis,t={},r={},v=e.parcelRequire94c2;null==v&&((v=function(e){if(e in t)return t[e].exports;if(e in r){var v=r[e];delete r[e];var n={id:e,exports:{}};return t[e]=n,v.call(n.exports,n,n.exports),n.exports}var l=Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){r[e]=t},e.parcelRequire94c2=v),(0,v.register)("kxxN7",function(e,t){Object.defineProperty(e.exports,"t",{get:()=>o,set:void 0,enumerable:!0,configurable:!0});var r=v("3Ru88");function n(e){for(let t of["\n\n","\n"," -> ",", ",","," - "," ","-"])if(e.includes(t))return t;return null}let l={int:{name:"int",check:e=>"int"===e,parse:e=>parseInt(e,10)},str:{name:"str",check:e=>"str"===e,parse:e=>e},vec:{name:"vec",check:e=>"vec"===e,parse:e=>{let t=n(e);if(!t)throw Error(`Invalid vec: ${e}`);let[v,l]=e.split(t).map(Number);return(0,r.V).vec(v,l)}},vec3:{name:"vec3",check:e=>"vec3"===e,parse:e=>{let t=n(e);if(!t)throw Error(`Invalid vec3: ${e}`);let[v,l,a]=e.split(t).map(Number);return(0,r.V3).vec3(v,l,a)}},arr:{name:"arr",check:e=>e.endsWith("[]"),parse:(e,t="")=>{let r=t.slice(0,-2),v=a(r);if(!v)throw Error(`Invalid array type "${r}" in "${t}"`);let l=n(e)??",";return e.split(l).filter(e=>""!==e).map(e=>v.parse(e.trim(),r))}},tuple:{name:"tuple",check:e=>e.startsWith("(")&&e.endsWith(")"),parse:(e,t="")=>{let r=t.slice(1,-1).split(","),v=n(e)??",";return e.split(v).map((e,v)=>{let n=a(r[v]);if(!n)throw Error(`Invalid tuple type "${r[v]}" in "${t}"`);return n.parse(e,r[v])})}}};function a(e){for(let t in l)if(l[t].check(e))return l[t];return null}function i(e){return{...e,map:t=>i({...e,parse:r=>t(e.parse(r))})}}let o={int:()=>i(l.int),str:()=>i(l.str),vec:()=>i(l.vec),vec3:()=>i(l.vec3),arr:(e,t)=>i({parse:r=>r.split(t??n(r)??",").map(e=>e.trim()).filter(e=>""!==e).map(t=>e.parse(t))}),tuple:(e,t)=>i({parse:r=>r.split(t??n(r)??",").map((t,r)=>e[r].parse(t))}),enum:(...e)=>i({parse:t=>{if(!e.includes(t))throw Error(`Invalid enum value "${t}"`);return t}}),named:function(e,t){return{...t,name:e}},tpl:function(e,...t){return i({parse:function(r){let v={},n=0;for(let l=0;l<t.length;l++){let i=e[l].length+n,o=e[l+1]?r.indexOf(e[l+1],i):r.length,c=r.slice(i,o),[s,f]=t[l].split("|");v[s]=function(e,t){let r=a(t);if(!r)throw Error(`Invalid type "${t}"`);return r.parse(e,t)}(c,f),n=o}return v}})},tpl2:function(e,...t){return i({parse:function(r){let v={},n=0;for(let l=0;l<t.length;l++){let a=e[l].length+n,i=e[l+1]?r.indexOf(e[l+1],a):r.length,o=r.slice(a,i),c=t[l];v[c.name]=c.parse(o),n=i}return v}})}}}),v("bICZs");var n=v("dENGy"),l=v("3Ru88"),a=v("i4wae"),i=v("kxxN7");const o=(0,i.t).tuple([l.Array2d,(0,i.t).str().map(e=>e.replaceAll("\n","")).map(e=>e.split("").map(l.V.asArrow))]).parse,c=e=>"O"===e||"["===e||"]"===e,s=(e,t)=>"["===(0,l.Array2d).get(e,t)?[t,(0,l.V).add(t,l.V.DIR_TO_VEC.R)]:"]"===(0,l.Array2d).get(e,t)?[(0,l.V).add(t,l.V.DIR_TO_VEC.L),t]:[t],f=(e,t,r)=>"#"!==(0,l.Array2d).get(e,(0,l.V).add(t,r));var l=v("3Ru88"),u=v("7zFg5");const p=document.getElementById("canvas");if(!(p instanceof HTMLCanvasElement))throw Error("no canvas");const d=p.getContext("2d");if(!d)throw Error("no ctx");(0,u.scaleCanvasToPixelRatio)(d,300,300);const m={green:"#91cfa1",red:"#ea859a",yellow:"#fef59d",text:"#fee15b"};let y=0,h=()=>{};const g=document.getElementById("input-form");if(!(g instanceof HTMLFormElement))throw Error("no form");g.addEventListener("submit",function(e){e.preventDefault();let t=new FormData(this);!function(e,t,r){cancelAnimationFrame(y),h();let[v,i]=o(e),p=window.innerWidth/2-32,d=p;r&&(v=v.map(e=>e.flatMap(e=>"#"===e?["#","#"]:"O"===e?["[","]"]:[e,"."])),p*=2);let g=v[0].length,x=p/g;(0,u.scaleCanvasToPixelRatio)(t,p,d),t.canvas.scrollIntoView({behavior:"smooth"});let O=(e,r)=>{t.clearRect(0,0,p,d),t.font=`${x}px monospace`,e.forEach((e,v)=>{e.forEach((e,n)=>{t.fillStyle="white",t.fillRect(n*x,v*x,x,x);let a=.05*x;t.fillStyle=m.yellow,t.fillRect(n*x+a,v*x+a,x-2*a,x-2*a),t.font=`${x}px monospace`,t.textAlign="center",t.textBaseline="top",(0,l.V).eq((0,l.V).vec(n,v),r)&&(t.fillStyle=m.text,t.fillText("\uD83E\uDD16",n*x+x/2,v*x)),"#"===e&&(t.fillStyle=m.red,t.fillRect(n*x+a,v*x+a,x-2*a,x-2*a),t.fillStyle=m.text,t.fillText(e,n*x+x/2,v*x+2*a)),"O"===e&&(t.fillStyle=m.green,t.fillRect(n*x+a,v*x+a,x-2*a,x-2*a),t.fillStyle=m.text,t.fillText(e,n*x+x/2,v*x+2*a)),"["===e&&(t.fillStyle=m.green,t.fillRect(n*x+a,v*x+a,x-a,x-2*a),t.fillStyle=m.text,t.fillText(e,n*x+x/2,v*x+2*a)),"]"===e&&(t.fillStyle=m.green,t.fillRect(n*x,v*x+a,x-a,x-2*a),t.fillStyle=m.text,t.fillText(e,n*x+x/2,v*x+2*a))})})},E=function*(e,t){let r=(0,l.Array2d).traverse(e).find(e=>"@"===e.value).pos;(0,l.Array2d).set(e,r,".");let v=r;for(let r of(yield(0,a.tuple)(v,e,"start"),t))v=function(e,t,r){let v=(0,l.V).fromArrow(r),a=(0,l.V).add(t,v);if("#"===(0,l.Array2d).get(e,a))return t;if("."===(0,l.Array2d).get(e,a))return a;let i=(0,n.dijkstra)(t=>[(0,l.V).add(t,v)].filter(t=>c((0,l.Array2d).get(e,t))).flatMap(t=>s(e,t)).map(e=>({value:e,distance:(0,l.V).mLen(t,e)})),s(e,a).map(e=>({value:e,distance:(0,l.V).mLen(a,e)})),l.V.toString).map(e=>e.value).toArray().reverse();if(i.some(t=>!f(e,t,v)))return t;for(let t of i)(0,l.Array2d).set(e,(0,l.V).add(t,v),(0,l.Array2d).get(e,t)),(0,l.Array2d).set(e,t,".");return a}(e,v,r),yield(0,a.tuple)(v,e,r)}(v,i),w=0;y=requestAnimationFrame(function e(t){if(t-w>30){w=t;let{value:e,done:r}=E.next();if(r){h();return}let[v,n]=e;O(n,v)}y=requestAnimationFrame(e)})}((t.get("input")?.toString()??"").trim(),d,t.get("part2")?.toString()==="on")}),g.querySelector("#input").textContent=`\
##########
#..O..O.O#
#......O.#
#.OO..O.O#
#..O@..O.#
#O#..O...#
#O..O..O.#
#.OO.O.OO#
#....O...#
##########

<vv>^<v^>v>^vv^v>v<>v^v<v<^vv<<<^><<><>>v<vvv<>^v^>^<<<><<v<<<v^vv^v>^
vvv<<^>^v^^><<>>><>^<<><^vv^^<>vvv<>><^^v>^>vv<>v<<<<v<^v>^<^^>>>^<v<v
><>vv>v^v^<>><>>>><^^>vv>v<^^^>>v^v^<^^>v^^>v^<^v>v<>>v^v^<v>v^^<^^vv<
<<v<^>>^^^^>>>v^<>vvv^><v<<<>^^^vv^<vvv>^>v<^^^^v<>^>vvvv><>>v^<<^^^^^
^><^><>>><>^^<<^^v>>><^<v>^<vv>>v>>>^v><>^v><<<<v>>v<v<v>vvv>^<><<>^><
^>><>^v<><^vvv<^^<><v<<<<<><^v<<<><<<^^<v<^^^><^>>^<v^><<<^>>^v<v^v<v^
>^>>^v>vv>^<<^v<>><<><<v<<v><>v<^vv<<<>^^v^>^^>>><<^v>>v^v><^^>>^<>vv^
<><^^>^^^<><vvvvv^v<v<<>^v<v>v<<^><<><<><<<^^<<<^<<>><<><^^^>^^<>^>v<>
^^>vv<^v^v<vv>^<><v<^v>^^^>>>^^vvv^>vvv<>>>^<^>>>>>^<<^v>^vvv<>^<><<v>
v^^>>><<^^<>>^v^<v^vv<>v^<<>^<^v^v><^<<<><<^<v><v<>vv>>v><v^<vv<>v^<<^`;
//# sourceMappingURL=index.a69ddb43.js.map
