var e=globalThis,t={},r={},v=e.parcelRequire94c2;null==v&&((v=function(e){if(e in t)return t[e].exports;if(e in r){var v=r[e];delete r[e];var n={id:e,exports:{}};return t[e]=n,v.call(n.exports,n,n.exports),n.exports}var l=Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){r[e]=t},e.parcelRequire94c2=v),(0,v.register)("2GOZM",function(e,t){Object.defineProperty(e.exports,"t",{get:()=>o,set:void 0,enumerable:!0,configurable:!0});var r=v("iHpWs");function n(e){for(let t of["\n\n","\n"," -> ",", ",","," - "," ","-"])if(e.includes(t))return t;return null}let l={int:{name:"int",check:e=>"int"===e,parse:e=>parseInt(e,10)},str:{name:"str",check:e=>"str"===e,parse:e=>e},vec:{name:"vec",check:e=>"vec"===e,parse:e=>{let t=n(e);if(!t)throw Error(`Invalid vec: ${e}`);let[v,l]=e.split(t).map(Number);return(0,r.V).vec(v,l)}},vec3:{name:"vec3",check:e=>"vec3"===e,parse:e=>{let t=n(e);if(!t)throw Error(`Invalid vec3: ${e}`);let[v,l,i]=e.split(t).map(Number);return(0,r.V3).vec3(v,l,i)}},arr:{name:"arr",check:e=>e.endsWith("[]"),parse:(e,t="")=>{let r=t.slice(0,-2),v=i(r);if(!v)throw Error(`Invalid array type "${r}" in "${t}"`);let l=n(e)??",";return e.split(l).filter(e=>""!==e).map(e=>v.parse(e.trim(),r))}},tuple:{name:"tuple",check:e=>e.startsWith("(")&&e.endsWith(")"),parse:(e,t="")=>{let r=t.slice(1,-1).split(","),v=n(e)??",";return e.split(v).map((e,v)=>{let n=i(r[v]);if(!n)throw Error(`Invalid tuple type "${r[v]}" in "${t}"`);return n.parse(e,r[v])})}}};function i(e){for(let t in l)if(l[t].check(e))return l[t];return null}function a(e){return{...e,map:t=>a({...e,parse:r=>t(e.parse(r))})}}let o={int:()=>a(l.int),str:()=>a(l.str),vec:()=>a(l.vec),vec3:()=>a(l.vec3),arr:(e,t)=>a({parse:r=>r.split(t??n(r)??",").map(e=>e.trim()).filter(e=>""!==e).map(t=>e.parse(t))}),tuple:(e,t)=>a({parse:r=>r.split(t??n(r)??",").map((t,r)=>e[r].parse(t))}),enum:(...e)=>a({parse:t=>{if(!e.includes(t))throw Error(`Invalid enum value "${t}"`);return t}}),named:function(e,t){return{...t,name:e}},tpl:function(e,...t){return a({parse:function(r){let v={},n=0;for(let l=0;l<t.length;l++){let a=e[l].length+n,o=e[l+1]?r.indexOf(e[l+1],a):r.length,c=r.slice(a,o),[s,f]=t[l].split("|");v[s]=function(e,t){let r=i(t);if(!r)throw Error(`Invalid type "${t}"`);return r.parse(e,t)}(c,f),n=o}return v}})},tpl2:function(e,...t){return a({parse:function(r){let v={},n=0;for(let l=0;l<t.length;l++){let i=e[l].length+n,a=e[l+1]?r.indexOf(e[l+1],i):r.length,o=r.slice(i,a),c=t[l];v[c.name]=c.parse(o),n=a}return v}})}}}),v("jOplp");var n=v("d81pG"),l=v("iHpWs"),i=v("k3N1b"),a=v("2GOZM");const o=(0,a.t).tuple([l.Array2d,(0,a.t).str().map(e=>e.replaceAll("\n","")).map(e=>e.split("").map(l.V.asArrow))]).parse,c=e=>"O"===e||"["===e||"]"===e,s=(e,t)=>"["===(0,l.Array2d).get(e,t)?[t,(0,l.V).add(t,l.V.DIR_TO_VEC.R)]:"]"===(0,l.Array2d).get(e,t)?[(0,l.V).add(t,l.V.DIR_TO_VEC.L),t]:[t],f=(e,t,r)=>"#"!==(0,l.Array2d).get(e,(0,l.V).add(t,r));var l=v("iHpWs"),p=v("7zFg5");const u=document.getElementById("canvas");if(!(u instanceof HTMLCanvasElement))throw Error("no canvas");const d=u.getContext("2d");if(!d)throw Error("no ctx");(0,p.scaleCanvasToPixelRatio)(d,300,300);const m={green:"#91cfa1",red:"#ea859a",yellow:"#fef59d",text:"#fee15b"};let y=0,h=()=>{};const O=document.getElementById("input-form");if(!(O instanceof HTMLFormElement))throw Error("no form");O.addEventListener("submit",function(e){e.preventDefault();let t=new FormData(this);!function(e,t,r){cancelAnimationFrame(y),h();let[v,a]=o(e),u=window.innerWidth/2-32,d=u;r&&(v=v.map(e=>e.flatMap(e=>"#"===e?["#","#"]:"O"===e?["[","]"]:[e,"."])),u*=2);let O=v[0].length,g=u/O;(0,p.scaleCanvasToPixelRatio)(t,u,d),t.canvas.scrollIntoView({behavior:"smooth"});let x=(e,r)=>{t.clearRect(0,0,u,d),t.font=`${g}px monospace`,e.forEach((e,v)=>{e.forEach((e,n)=>{t.fillStyle="white",t.fillRect(n*g,v*g,g,g);let i=.05*g;t.fillStyle=m.yellow,t.fillRect(n*g+i,v*g+i,g-2*i,g-2*i),t.font=`${g}px monospace`,t.textAlign="center",t.textBaseline="top",(0,l.V).eq((0,l.V).vec(n,v),r)&&(t.fillStyle=m.text,t.fillText("\uD83E\uDD16",n*g+g/2,v*g)),"#"===e&&(t.fillStyle=m.red,t.fillRect(n*g+i,v*g+i,g-2*i,g-2*i),t.fillStyle=m.text,t.fillText(e,n*g+g/2,v*g+2*i)),"O"===e&&(t.fillStyle=m.green,t.fillRect(n*g+i,v*g+i,g-2*i,g-2*i),t.fillStyle=m.text,t.fillText(e,n*g+g/2,v*g+2*i)),"["===e&&(t.fillStyle=m.green,t.fillRect(n*g+i,v*g+i,g-i,g-2*i),t.fillStyle=m.text,t.fillText(e,n*g+g/2,v*g+2*i)),"]"===e&&(t.fillStyle=m.green,t.fillRect(n*g,v*g+i,g-i,g-2*i),t.fillStyle=m.text,t.fillText(e,n*g+g/2,v*g+2*i))})})},E=function*(e,t){let r=(0,l.Array2d).traverse(e).find(e=>"@"===e.value).pos;(0,l.Array2d).set(e,r,".");let v=r;for(let r of(yield(0,i.tuple)(v,e,"start"),t))v=function(e,t,r){let v=(0,l.V).fromArrow(r),i=(0,l.V).add(t,v);if("#"===(0,l.Array2d).get(e,i))return t;if("."===(0,l.Array2d).get(e,i))return i;let a=(0,n.dijkstra)(t=>s(e,(0,l.V).add(t,v)).filter(t=>c((0,l.Array2d).get(e,t))),e=>(0,l.V).mLen(e,i),s(e,i),l.V.toString).map(e=>e.value).toArray().reverse();if(a.some(t=>!f(e,t,v)))return t;for(let t of a)(0,l.Array2d).set(e,(0,l.V).add(t,v),(0,l.Array2d).get(e,t)),(0,l.Array2d).set(e,t,".");return i}(e,v,r),yield(0,i.tuple)(v,e,r)}(v,a),A=0;y=requestAnimationFrame(function e(t){if(t-A>30){A=t;let{value:e,done:r}=E.next();if(r){h();return}let[v,n]=e;x(n,v)}y=requestAnimationFrame(e)})}((t.get("input")?.toString()??"").trim(),d,t.get("part2")?.toString()==="on")}),O.querySelector("#input").textContent=`\
##########
#..O..O.O#
#......O.#
#.OO..O.O#
#..O@..O.#
#O#..O...#
#O..O..O.#
#.OO.O.OO#
#....O...#
##########

<vv>^<v^>v>^vv^v>v<>v^v<v<^vv<<<^><<><>>v<vvv<>^v^>^<<<><<v<<<v^vv^v>^
vvv<<^>^v^^><<>>><>^<<><^vv^^<>vvv<>><^^v>^>vv<>v<<<<v<^v>^<^^>>>^<v<v
><>vv>v^v^<>><>>>><^^>vv>v<^^^>>v^v^<^^>v^^>v^<^v>v<>>v^v^<v>v^^<^^vv<
<<v<^>>^^^^>>>v^<>vvv^><v<<<>^^^vv^<vvv>^>v<^^^^v<>^>vvvv><>>v^<<^^^^^
^><^><>>><>^^<<^^v>>><^<v>^<vv>>v>>>^v><>^v><<<<v>>v<v<v>vvv>^<><<>^><
^>><>^v<><^vvv<^^<><v<<<<<><^v<<<><<<^^<v<^^^><^>>^<v^><<<^>>^v<v^v<v^
>^>>^v>vv>^<<^v<>><<><<v<<v><>v<^vv<<<>^^v^>^^>>><<^v>>v^v><^^>>^<>vv^
<><^^>^^^<><vvvvv^v<v<<>^v<v>v<<^><<><<><<<^^<<<^<<>><<><^^^>^^<>^>v<>
^^>vv<^v^v<vv>^<><v<^v>^^^>>>^^vvv^>vvv<>>>^<^>>>>>^<<^v>^vvv<>^<><<v>
v^^>>><<^^<>>^v^<v^vv<>v^<<>^<^v^v><^<<<><<^<v><v<>vv>>v><v^<vv<>v^<<^`;
//# sourceMappingURL=index.acde3242.js.map
