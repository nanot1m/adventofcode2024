var e=globalThis,t={},n={},r=e.parcelRequire94c2;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,r.call(a.exports,a,a.exports),a.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},e.parcelRequire94c2=r),r.register,r("bICZs");var a=r("dENGy"),o=r("3Ru88");const i=o.Array2d.parse,s=(e,t=new Set)=>{for(let n of(t.add(e),e.predecessors))s(n,t);return t};var o=r("3Ru88"),l=r("7zFg5");const d=document.getElementById("canvas");if(!(d instanceof HTMLCanvasElement))throw Error("no canvas");const c=d.getContext("2d");if(!c)throw Error("no ctx");(0,l.scaleCanvasToPixelRatio)(c,300,300);const p={green:"#91cfa1",red:"#ea859a",yellow:"#fef59d",black:"black",white:"white"};let u=()=>{};const v=document.createElement("div");function f(e,t,n,r=300){cancelAnimationFrame(0),u();let c=i(e),y=c[0].length,m=c.length,h=Math.max(r/y,10);(0,l.scaleCanvasToPixelRatio)(t,y*h,m*h),t.canvas.scrollIntoView({behavior:"smooth"});let E=(e,n,r,a=p.white)=>{t.font=`${h}px monospace`,t.textAlign="center",t.textBaseline="middle",t.fillStyle=a,t.fillText(r,e*h+h/2,n*h+h/2+h/10)},x=-1,g=-1,w=(e,t,n)=>{v.textContent=n,v.style.left=`${e}px`,v.style.top=`${t-30}px`,v.style.display="block"},b=()=>{v.style.display="none"},{visited:L,end:k,start:A}=function(e){let t=(0,o.Array2d).traverse(e).find(e=>"S"===e.value).pos,n=(0,o.Array2d).traverse(e).find(e=>"E"===e.value).pos;return{visited:s((0,a.dijkstra)(t=>[{value:{pos:(0,o.V).add(t.pos,o.V.DIRS_4[t.dir]),dir:t.dir},distance:1},{value:{pos:t.pos,dir:(0,o.Lib).mod(t.dir+1,4)},distance:1e3},{value:{pos:t.pos,dir:(0,o.Lib).mod(t.dir-1,4)},distance:1e3}].filter(({value:t})=>"#"!==(0,o.Array2d).get(e,t.pos)),[{value:{pos:t,dir:1},distance:0}],e=>`${e.pos[0]},${e.pos[1]},${e.dir}`).find(e=>(0,o.V).eq(e.value.pos,n))),start:t,end:n}}(c),S=Array.from(L).sort((e,t)=>e.distance-t.distance);(()=>{u();let e=(0,o.Array2d).map(c,(e,t)=>"#"===e?{type:"wall",distance:0,dir:0}:(0,o.V).eq(t,A)?{type:"start",distance:0,dir:1}:(0,o.V).eq(t,k)?{type:"end",distance:0,dir:0}:{type:"empty",distance:0,dir:0});for(let t of S)if(!(0,o.V).eq(t.value.pos,A)){if((0,o.V).eq(t.value.pos,k)){(0,o.Array2d).set(e,t.value.pos,{type:"end",distance:t.distance,dir:t.value.dir});continue}(0,o.Array2d).set(e,t.value.pos,{type:"visited",distance:t.distance,dir:t.value.dir})}function n(){for(let n of(t.fillStyle=p.black,t.fillRect(0,0,t.canvas.width,t.canvas.height),(0,o.Array2d).traverse(e))){let{type:e}=n.value,[r,a]=n.pos,o=r===x&&a===g,i=o?p.black:p.white;switch(r===x&&a===g&&(t.fillStyle=p.yellow,t.fillRect(r*h,a*h,h,h)),e){case"wall":E(r,a,"#",o?i:p.green);break;case"start":E(r,a,"S",i);break;case"end":E(r,a,"E",i);break;case"empty":E(r,a,".",i);break;case"visited":E(r,a,["^",">","v","<"][n.value.dir],o?i:p.red)}}}function r(t){let r=Math.floor(t.offsetX/h),a=Math.floor(t.offsetY/h);x=r,g=a;let i=(0,o.V).vec(r,a),s=(0,o.Array2d).get(e,i);s&&["visited","start","end"].includes(s.type)?(n(),w(t.clientX,t.clientY,`${s.type} ${s.distance}`)):(n(),b())}n(),d&&(d.addEventListener("mousemove",r),u=()=>d.removeEventListener("mousemove",r))})()}v.style.position="fixed",v.style.zIndex="1000",v.style.pointerEvents="none",v.style.padding="5px",v.style.border="1px solid black",v.style.borderRadius="5px",v.style.backgroundColor="white",v.style.color="black",v.style.display="none",v.style.fontFamily="monospace",v.style.fontSize="12px",document.body.appendChild(v);const y=document.getElementById("input-form");if(!(y instanceof HTMLFormElement))throw Error("no form");let m="";y.addEventListener("submit",function(e){e.preventDefault();let t=new FormData(this),n=t.get("input")?.toString()??"";m=n,f(n.trim(),c,t.get("part2")?.toString()==="on",parseInt(c.canvas.style.width,10))});const h=document.getElementById("resize-handle");if(!(h instanceof HTMLDivElement))throw Error("no resize handle");h.addEventListener("mousedown",function(e){e.preventDefault();let t=e.clientX,n=parseInt(c.canvas.style.width,10),r=e=>{let r=Math.max(100,n+(e.clientX-t));f(m,c,!1,r)},a=()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",a)}),y.querySelector("#input").textContent=`\
###########
##...######
##.#.######
##.#.....E#
##.#####.##
#S...###.##
####.###.##
####.###.##
####.###.##
####.###.##
####.....##
###########`;
//# sourceMappingURL=index.2f840b4f.js.map
