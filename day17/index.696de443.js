var t=globalThis,e={},n={},r=t.parcelRequire94c2;null==r&&((r=function(t){if(t in e)return e[t].exports;if(t in n){var r=n[t];delete n[t];var i={id:t,exports:{}};return e[t]=i,r.call(i.exports,i,i.exports),i.exports}var o=Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){n[t]=e},t.parcelRequire94c2=r),(0,r.register)("kxxN7",function(t,e){Object.defineProperty(t.exports,"t",{get:()=>s,set:void 0,enumerable:!0,configurable:!0});var n=r("3Ru88");function i(t){for(let e of["\n\n","\n"," -> ",", ",","," - "," ","-"])if(t.includes(e))return e;return null}let o={int:{name:"int",check:t=>"int"===t,parse:t=>parseInt(t,10)},str:{name:"str",check:t=>"str"===t,parse:t=>t},vec:{name:"vec",check:t=>"vec"===t,parse:t=>{let e=i(t);if(!e)throw Error(`Invalid vec: ${t}`);let[r,o]=t.split(e).map(Number);return(0,n.V).vec(r,o)}},vec3:{name:"vec3",check:t=>"vec3"===t,parse:t=>{let e=i(t);if(!e)throw Error(`Invalid vec3: ${t}`);let[r,o,l]=t.split(e).map(Number);return(0,n.V3).vec3(r,o,l)}},arr:{name:"arr",check:t=>t.endsWith("[]"),parse:(t,e="")=>{let n=e.slice(0,-2),r=l(n);if(!r)throw Error(`Invalid array type "${n}" in "${e}"`);let o=i(t)??",";return t.split(o).filter(t=>""!==t).map(t=>r.parse(t.trim(),n))}},tuple:{name:"tuple",check:t=>t.startsWith("(")&&t.endsWith(")"),parse:(t,e="")=>{let n=e.slice(1,-1).split(","),r=i(t)??",";return t.split(r).map((t,r)=>{let i=l(n[r]);if(!i)throw Error(`Invalid tuple type "${n[r]}" in "${e}"`);return i.parse(t,n[r])})}}};function l(t){for(let e in o)if(o[e].check(t))return o[e];return null}function a(t){return{...t,map:e=>a({...t,parse:n=>e(t.parse(n))})}}let s={int:()=>a(o.int),str:()=>a(o.str),vec:()=>a(o.vec),vec3:()=>a(o.vec3),arr:(t,e)=>a({parse:n=>n.split(e??i(n)??",").map(t=>t.trim()).filter(t=>""!==t).map(e=>t.parse(e))}),tuple:(t,e)=>a({parse:n=>n.split(e??i(n)??",").map((e,n)=>t[n].parse(e))}),enum:(...t)=>a({parse:e=>{if(!t.includes(e))throw Error(`Invalid enum value "${e}"`);return e}}),named:function(t,e){return{...e,name:t}},tpl:function(t,...e){return a({parse:function(n){let r={},i=0;for(let o=0;o<e.length;o++){let a=t[o].length+i,s=t[o+1]?n.indexOf(t[o+1],a):n.length,c=n.slice(a,s),[u,p]=e[o].split("|");r[u]=function(t,e){let n=l(e);if(!n)throw Error(`Invalid type "${e}"`);return n.parse(t,e)}(c,p),i=s}return r}})},tpl2:function(t,...e){return a({parse:function(n){let r={},i=0;for(let o=0;o<e.length;o++){let l=t[o].length+i,a=t[o+1]?n.indexOf(t[o+1],l):n.length,s=n.slice(l,a),c=e[o];r[c.name]=c.parse(s),i=a}return r}})}}}),r("bICZs");var i=r("i4wae"),o=r("kxxN7");const l=(0,o.t).tpl`\
Register A: ${"a|int"}
Register B: ${"b|int"}
Register C: ${"c|int"}

Program: ${"program|int[]"}`.parse,a={0:()=>0,1:()=>1,2:()=>2,3:()=>3,4:t=>t.a,5:t=>t.b,6:t=>t.c},s={0:(t,e)=>{let n=a[e](t);t.a=Math.floor(t.a/2**n),t.ip+=2},1:(t,e)=>{t.b=t.b^e,t.ip+=2},2:(t,e)=>{let n=a[e](t);t.b=(0,i.mod)(n,8),t.ip+=2},3:(t,e)=>{t.ip=0!==t.a?e:t.ip+2},4:(t,e)=>{t.b=t.b^t.c,t.ip+=2},5:(t,e)=>{let n=a[e](t);t.output.push((0,i.mod)(n,8)),t.ip+=2},6:(t,e)=>{let n=a[e](t);t.b=Math.floor(t.a/2**n),t.ip+=2},7:(t,e)=>{let n=a[e](t);t.c=Math.floor(t.a/2**n),t.ip+=2}};r("3Ru88");var c=r("7zFg5");const u=document.getElementById("canvas");if(!(u instanceof HTMLCanvasElement))throw Error("no canvas");const p=u.getContext("2d");if(!p)throw Error("no ctx");(0,c.scaleCanvasToPixelRatio)(p,448,336);const f={green:"#91cfa1",red:"#ea859a",blue:"blue",black:"black",white:"white"};let m=0,d=()=>{};const h=document.createElement("div");h.style.position="fixed",h.style.zIndex="1000",h.style.pointerEvents="none",h.style.padding="5px",h.style.border="1px solid black",h.style.borderRadius="5px",h.style.backgroundColor="white",h.style.color="black",h.style.display="none",h.style.fontFamily="monospace",h.style.fontSize="12px",document.body.appendChild(h);const v={0:"0",1:"1",2:"2",3:"3",4:"A",5:"B",6:"C"},g=(t,e,n)=>0===t?`A = A / 2^${v[e]}`:1===t?`B = B ^ ${e}`:2===t?`B = ${v[e]} % 8`:3===t?`IP = A ? ${e} : IP + 2`:4===t?"B = B ^ C":5===t?`Out > ${v[e]} % 8`:6===t?`B = A / 2^${v[e]}`:7===t?`C = A / 2^${v[e]}`:void 0;let b=!1;const E=document.getElementById("simulate");if(!(E instanceof HTMLButtonElement))throw Error("no simulate button");E.addEventListener("click",function(){if(b=!b,!(E instanceof HTMLButtonElement))throw Error("no simulate button");E.textContent=b?"Pause":"Simulate"});const x=document.getElementById("output-input");if(!(x instanceof HTMLTextAreaElement))throw Error("no output");const $=t=>{x.textContent+=t+"\n",x.scrollTop=x.scrollHeight},y=()=>{x.textContent=""},w=document.getElementById("input-form");if(!(w instanceof HTMLFormElement))throw Error("no form");w.addEventListener("submit",function(t){t.preventDefault();let e=new FormData(this);if(function(t,e,n){cancelAnimationFrame(m),d();let{a:r,b:i,c:o,program:a}=l(t),p={a:r,b:i,c:o,ip:0,output:[]},h=Math.max(24,a.length+8);(0,c.scaleCanvasToPixelRatio)(e,448,14*h),e.canvas.scrollIntoView({behavior:"smooth"});let v=(t,n,r,i)=>{e.font="14px monospace",e.textAlign="center",e.textBaseline="middle",e.fillStyle=i,e.fillText(r,14*t+7,14*n+7+1.4)};function x(t,e,n,r=f.black){n.split("").forEach((n,i)=>v(t+i,e,n,r))}function y(){e.fillStyle=f.white,e.fillRect(0,0,448,14*h),e.strokeStyle="lightgray",e.lineWidth=1;for(let t=0;t<h;t++)for(let n=0;n<32;n++)e.strokeRect(14*n,14*t,14,14);(function(t,e,n=f.black){x(1,1,`A : ${p.a}`,n),x(1,2,`B : ${p.b}`,n),x(1,3,`C : ${p.c}`,n),x(t,e+3,`IP: ${p.ip}`,n),x(t,e+4,`Out: ${p.output.join(",")}`,n)})(1,1),function(t,e,n=f.black){for(let t=0;t<a.length;t++){let e=a[t];x(2,7+t,`${e}`,t===p.ip?f.green:t===p.ip+1?f.red:n)}}(0,0),function(t,e,n=f.black){x(1,7+p.ip,"â–¸",n)}(0,0),function(t,e,n=f.blue){for(let t=0;t<a.length;t+=2){let e=a[t],r=a[t+1];x(4,7+t,g(e,r,p),n)}}(0,0)}function w(t){t.offsetX,t.offsetY}y(),u&&(u.addEventListener("mousemove",w),d=()=>u.removeEventListener("mousemove",w));let k=0,B=0;m=requestAnimationFrame(function t(e){if(!b){B=e,m=requestAnimationFrame(t);return}e-B>1e3&&(B=e,function(){if(p.ip>=a.length){!function(){if(b=!1,!(E instanceof HTMLButtonElement))throw Error("no simulate button");E.textContent="Done",E.disabled=!0}();return}(function(t,e){let n=t[e.ip],r=t[e.ip+1];s[n](e,r)})(a,p),$("--------------------"),$(`Step ${k++}`),$(`A: ${p.a}`),$(`B: ${p.b}`),$(`C: ${p.c}`),$(`IP: ${p.ip}`),$(`Output: ${p.output.join(",")}`),$("--------------------"),$("")}(),y()),m=requestAnimationFrame(t)})}((e.get("input")?.toString()??"").trim(),p,e.get("part2")?.toString()),!(E instanceof HTMLButtonElement))throw Error("no simulate button");E.disabled=!1,y()}),w.querySelector("#input").textContent=`\
Register A: 21539243
Register B: 0
Register C: 0

Program: 2,4,1,3,7,5,1,5,0,3,4,1,5,5,3,0`;
//# sourceMappingURL=index.696de443.js.map
